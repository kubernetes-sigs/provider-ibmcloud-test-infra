- name: Setup Networking on the control-plane, compute and bastion nodes.
  hosts:
    - masters
    - workers
    - bastion
  roles:
    - setup-networking

- name: Prepare nodes with OS/Package updates
  hosts:
    - masters
    - workers
  roles:
    - role: update-pkgs

- name: Install Runtime and Kubernetes
  hosts:
    - masters
    - workers
  roles:
    - runtime
    - download-k8s
    - install-k8s

- name: Set desired SMT levels on nodes
  hosts:
    - masters
    - workers
  roles:
    - set-smt

- name: Install networking - calico
  hosts: masters
  roles:
    - install-calico
